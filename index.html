<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D Filament Tracker</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <!-- Header / Title -->
    <div class="header">
      <h1>🎯 3D Filament Tracker</h1>
      <p>Track your filament inventory and project usage with precision</p>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Enhanced Alert System -->
      <div id="alertContainer"></div>

      <!-- Add Filament Section -->
      <!-- addFilament() -->
      <div class="section workflow-step" data-step="1">
        <h2>➕ Step 1: Add Filament Spools</h2>
        <div class="workflow-note">
          📦 Add new spools to your inventory here, or skip if you already have filament available.<br />
          📌 <strong>Note:</strong> All fields required.
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label for="filamentBrand">Brand</label>
            <input type="text" id="filamentBrand" placeholder="e.g., Hatchbox, eSUN">
          </div>
          <div class="form-group">
            <label for="filamentType">Material Type</label>
            <select id="filamentType">
              <option value="PLA">PLA</option>
              <option value="ABS">ABS</option>
              <option value="PETG">PETG</option>
              <option value="TPU">TPU</option>
              <option value="Wood">Wood Fill</option>
              <option value="Metal">Metal Fill</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="filamentColor">Color</label>
            <input type="text" id="filamentColor" placeholder="e.g., Red, Blue, Transparent">
          </div>
          <div class="form-group">
            <label for="filamentWeight">Initial Weight (grams)</label>
            <input type="number" id="filamentWeight" placeholder="1000" min="1">
          </div>
          <div class="form-group">
            <label for="currencyType">Currency</label>
            <select id="currencyType">
              <option value="INR">₹ INR</option>
              <option value="USD">$ USD</option>
              <option value="EUR">€ EUR</option>
              <option value="GBP">£ GBP</option>
              <option value="JPY">¥ JPY</option>
              <option value="CAD">C$ CAD</option>
              <option value="AUD">A$ AUD</option>
            </select>
          </div>
          <div class="form-group">
            <label for="filamentCost">Cost</label>
            <input type="number" id="filamentCost" placeholder="0.00" step="0.01" min="0">
          </div>
          <div class="form-group form-group-full">
            <label for="purchaseDate">Purchase Date</label>
            <input type="date" id="purchaseDate">
          </div>
        </div>
        <button class="btn" onclick="addFilament()">Add Filament Spool</button>
      </div>

      <!-- Filament Inventory Table -->
      <div class="section">
        <h2>📦 Filament Inventory</h2>
        <div class="table-container">
          <table id="filamentTable">
            <thead>
              <tr>
                <th>Brand</th>
                <th>Type</th>
                <th>Color</th>
                <th>Original Weight</th>
                <th>Current Weight</th>
                <th>Used</th>
                <th>Cost</th>
                <th>Purchase Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="filamentTableBody">
            </tbody>
          </table>
        </div>
      </div>

      <!-- Project Information -->
      <!-- createProject() -->
      <div class="section workflow-step" data-step="2">
        <h2>ℹ️ Step 2: Project Information</h2>
        <div class="workflow-note">
          📝 Start here: Create your project with basic information. You'll add filament usage in Step 3 below.<br />
          📌 <strong>Note:</strong> Customer Name and Project Name required.
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label for="customerName">Customer Name</label>
            <input type="text" id="customerName" placeholder="John Doe, Personal Project, etc.">
          </div>
          <div class="form-group">
            <label for="projectName">Project Name</label>
            <input type="text" id="projectName" placeholder="e.g., Phone Stand, Miniature">
          </div>
          <div class="form-group">
            <label for="projectDate">Project Date</label>
            <input type="date" id="projectDate">
          </div>
          <div class="form-group">
            <label for="projectNotes">Notes (Optional)</label>
            <input type="text" id="projectNotes" placeholder="Print settings, issues, etc.">
          </div>
          <div class="form-group form-group-full">
            <label for="projectUrl">Project URL (Optional)</label>
            <input type="url" id="projectUrl" placeholder="https://thingiverse.com/thing/...">
          </div>
        </div>
        <button class="btn" onclick="createProject()">Create Project</button>
        <h2>🔨 Step 2a: Update Project with Filament Usage</h2>
        <div class="workflow-note">
          🎯 Select filament and enter how much you used for your project created in Step 1.
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label for="projectFilament">Select Filament</label>
            <select id="projectFilament">
              <option value="">Choose filament...</option>
            </select>
          </div>
          <div class="form-group">
            <label for="usedWeight">Weight Used (grams)</label>
            <input type="number" id="usedWeight" placeholder="15" min="0.1" step="0.1">
          </div>
        </div>
        <button class="btn" onclick="updateProjectWithFilament()">Update Project Information</button>
      </div>

      <!-- Project History Table -->
      <div class="section">
        <h2>📋 Project History</h2>
        <div class="table-container">
          <table id="projectTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Project Name</th>
                <th>Customer</th>
                <th>Filament Used</th>
                <th>Weight Used</th>
                <th>Cost</th>
                <th>Status</th>
                <th>URL</th>
                <th>Notes</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="projectTableBody">
            </tbody>
          </table>
        </div>
      </div>

      <!-- Download Section -->
      <!-- downloadFilamentCSV(), downloadProjectCSV() -->
      <div class="download-section">
        <h2>💾 Export Your Data</h2>
        <p>Download your filament tracking data as CSV files for backup or use in Excel/Google Sheets</p>
        <br>
        <a href="#" class="download-btn" onclick="downloadFilamentCSV()">📊 Download Filament Inventory</a>
        <a href="#" class="download-btn" onclick="downloadProjectCSV()">📋 Download Project History</a>
      </div>
      <!-- Danger Zone -->
      <div class="danger-section">
        <h2>⚠️ Danger Zone</h2>
        <p>Permanently delete all your filament and project data. This action cannot be undone!</p>
        <br>
        <button class="danger-btn" onclick="nukeAllData()">🗑️ Clear All Data</button>
      </div>
    </div>
  </div>

  <script src="scripts.js"></script>
</body>
</html>
